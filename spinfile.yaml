# The spinfile.yaml for spin_docs is required since building the documentation
# requires a provisioned project.

plugin_packages:
    - spin_python
    - spin_docs
    - '../spin_conpod'

plugins:
    - spin_docs.sphinx
    - spin_conpod.stdworkflows

python:
    version: '3.11.9'
    requirements:
        - sphinx-rtd-theme

sphinx:
    build_dir: _build

build_rules:
    task docs:
        sources: docs/_schemaref.rst
    docs/_schemaref.rst:
        sources: [src/spin_conpod]
        spin:
            - schemadoc docs -o docs/plugins/stdworkflows_schemaref.rst
