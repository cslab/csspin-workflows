# The spinfile.yaml for csspin-docs is required since building the documentation
# requires a provisioned project.
spin:
    project_name: csspin-workflows

plugin_packages:
    - csspin-python
    - csspin-docs
    - .

plugins:
    - csspin_docs.sphinx
    - csspin_workflows.stdworkflows

python:
    version: '3.11.9'
    requirements:
        - sphinx-rtd-theme

build_rules:
    task docs:
        sources: doc/_schemaref.rst
    doc/_schemaref.rst:
        sources: [src/csspin_workflows]
        spin:
            - schemadoc doc --rst -o doc/plugins/stdworkflows_schemaref.rst
